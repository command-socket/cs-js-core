"use strict";var __awaiter=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(s,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function o(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,o)}c((n=n.apply(e,t||[])).next())}))},__importStar=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(exports,"__esModule",{value:!0});const command_socket_message_1=require("./command-socket-message"),IDUtilities=__importStar(require("../../util/id-utilities"));class CommandSocketMessageFactory{static createRequestMessage(e,t,r,n=Date.now()){return __awaiter(this,void 0,void 0,(function*(){let{id:s,ip:i}=yield r.getSocketIdentity();return{command:e,meta:{request:{id:s,ip:i},response:null,timeline:{requestSent:n,requestReceived:null,responseSent:null,responseReceived:null},mode:"request",correspondenceID:IDUtilities.generateID(command_socket_message_1.CORRESPONDENCE_ID_LENGTH),didError:!1},parameters:t,return:null}}))}static createResponseMessage(e,t,r,n=!1,s=Date.now(),i=Date.now()){return __awaiter(this,void 0,void 0,(function*(){let a,{id:o,ip:c}=yield r.getSocketIdentity();if(n){let e=t;a={name:e.name,message:e.message}}else a=t;return{command:e.command,meta:{request:e.meta.request,response:{id:o,ip:c},timeline:{requestSent:e.meta.timeline.requestSent,requestReceived:s,responseSent:i,responseReceived:null},mode:"response",correspondenceID:e.meta.correspondenceID,didError:n},parameters:e.parameters,return:a}}))}}exports.CommandSocketMessageFactory=CommandSocketMessageFactory;
//# sourceMappingURL=command-socket-message-factory.js.map
